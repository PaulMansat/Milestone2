### Error Type 4: Error while transferring data between driver and executors.
Type 4 error is related to errors that happen when the driver and the executor can't communicate. This type of error can come in many flavours as it is a quiet general error and many actors can go south before causing an error in the transfer of data between driver and executor. 

The general idea is usually the an error happen in the driver or the executor level and they can't communicate anymore. The main problem is that we have to be careful to not mislead this error with a type 5 or 6 error.  Type 5/6 error happen in the executor due to some code that make it crash. When the latter happen, usually the executor fails to communicate with the driver and the driver's TaskSetManager reports an error ... 
However, lucky for us, usually when an error due to some code happen in the exectuor, the `YarnClusterScheduler` reports first an error. Without entering into to much details, the `YarnClusterScheduler` is used (as lock) by the `TaskSetMaster` and it monitors the "well being" of the executor. 
So the idea will be to track errors returned by the `TaskSetManager` or any actors with the word **Task** in them (egs. **ERROR TaskResultGetter:**). 

Unfortunatly, this is not enaught, sometime, other actors responsible for the connection between the driver and the executor can go nuts ... It is the case of the `ShortCircuitCache` or the `ResourceLeakDetector`. The first is responsible for HDFS connection between the driver and executors and the second is responsible for the the netty protocol connection between the driver and executor. 

Here is a quick protocol on how to analyse type 4 errors: 
1. Look for the driver's container (i.e the container that has the form {app_id}_{attemptNb}_0001)
2. Look for the first error message (i.e a message that has **ERROR {actor_name}: (...)**). We DON'T want the first message for be comming from the YarnClusterScheduler, it needs to come from an actor that has the name **Task** or **Transport** in it (eg TaskResultGetter, TaskSetMaster + I put all possible actors raising error message below, choose them in the list). If the error reported by one of these actor and ITS THE FIRST ERROR, then we are a.s that its a type 3 error.  Finaly, we are also looking for actors's error's **Error ResourceLeakDetector: (...)** or **ResourceLeakDetector** (please check that its indeed errors in the driver's container). Also note that if first error is **ERROR Utils:**, we can ignore it for now, we are still looking for the next error to consider. 
4. We will also cross validate this error by looking in the executor. We are looking in the driver's containers for the first error to be from the **TransportResponseHandler** ... actors with the **Transport** in it.  Finally, we are also looking for an error raised by the Executor (i.e **ERROR Executor:**) and its message the word **driver** must be contained. If one one the aforementioned error is found then its a type 3 error. Also, if we found NO error in the executor its also a type 3 error. However, if another error is found (like an **ERROR Executor:** that does not contains the word driver in it) that was not mentioned before then its not a type 3 error. 
5. To find the exception type we look for an exception first in the **ERROR Utils:** messages (if any), then in the stacktrace of the first Error message first at the executor level (if any error), and then at the Driver's level (if any). We then look for an exception raised by the APPLICATION MASTER and in its stacktrace. Error first might be found in the stacktrace of the Executor error's message (if any), then in the stacktrace of the driver's ERROR and the in the stacktrace of the ApplicationMaster. If none found then -1 and we will ask Nicolas' method to find it. 
6. Another type of driver/executor failing to communicate error happens when the driver stops working and doesn't send any message to the executors that do not communicate with the driver anymore. Then they will raise an EXECUTOR error, with name **driver** in them. The error type is org.apache.spark.SparkException and the line is -1. 

